<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Terrain Lab</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <canvas id="terrain-canvas" aria-label="Generated terrain map"></canvas>

    <section id="floating-controls" class="floating-controls" aria-label="Terrain controls">
      <button
        id="panel-toggle-btn"
        class="panel-toggle-btn"
        type="button"
        aria-expanded="true"
        aria-controls="controls-body"
        aria-label="Minimize controls"
      >
        -
      </button>

      <header class="controls-header">
        <div>
          <h1 id="panel-title">Terrain Lab</h1>
          <p id="panel-subtitle">Interactive topology preview</p>
        </div>
        <div class="header-actions">
          <button id="regenerate-btn" type="button">Re-generate</button>
        </div>
      </header>

      <div id="controls-body" class="controls-body">
        <div id="terrain-controls-group" class="mode-controls is-active">
          <label class="control-row" for="algorithm-toggle">
            <span>Algorithm</span>
            <strong id="algorithm-value">Topology</strong>
          </label>
          <div id="algorithm-toggle" class="algorithm-toggle" role="group" aria-label="Generation algorithm">
            <button class="algo-btn is-active" data-algo="topology" type="button">Topology</button>
            <button class="algo-btn" data-algo="midpoint" type="button">Midpoint</button>
          </div>

          <label class="control-row" for="smoothness-slider">
            <span>Smoothness</span>
            <strong id="smoothness-value">55</strong>
          </label>
          <input id="smoothness-slider" type="range" min="0" max="100" step="1" value="55" />

          <label class="control-row" for="continent-scale-slider">
            <span>Continent Scale</span>
            <strong id="continent-scale-value">100%</strong>
          </label>
          <input id="continent-scale-slider" type="range" min="50" max="200" step="1" value="100" />

          <label class="control-row" for="sea-level-slider">
            <span>Sea Level</span>
            <strong id="sea-level-value">58%</strong>
          </label>
          <input id="sea-level-slider" type="range" min="20" max="80" step="1" value="58" />

          <label class="control-row" for="mountaintop-slider">
            <span>Snowcaps</span>
            <strong id="mountaintop-value">5%</strong>
          </label>
          <input id="mountaintop-slider" type="range" min="1" max="15" step="1" value="5" />

          <div class="control-row counter-row">
            <span>Rivers</span>
            <strong id="rivers-count-value">6</strong>
          </div>
          <div class="river-actions">
            <button id="reset-rivers-btn" class="secondary-btn" type="button">Reset Rivers</button>
            <button id="remove-all-rivers-btn" class="secondary-btn" type="button">Remove All Rivers</button>
          </div>
        </div>

        <div id="resource-controls-group" class="mode-controls is-hidden">
          <label class="control-row" for="resource-type-select">
            <span>Resource Type</span>
            <strong id="resource-type-value">Wind</strong>
          </label>
          <select id="resource-type-select" class="resource-select">
            <option value="wind">Wind</option>
            <option value="sun">Sun</option>
            <option value="gas">Natural Gas</option>
          </select>

          <label class="control-row">
            <span>Vertex Snap</span>
            <strong id="resource-snap-value">10 px</strong>
          </label>

          <label class="control-row" for="resource-strength-slider">
            <span>Zone Strength</span>
            <strong id="resource-strength-value">70%</strong>
          </label>
          <input id="resource-strength-slider" type="range" min="10" max="100" step="1" value="70" />

          <div class="control-row counter-row">
            <span>Draft Vertices</span>
            <strong id="resource-draft-count-value">0</strong>
          </div>

          <div class="control-row counter-row">
            <span>Resource Zones</span>
            <strong id="resource-zones-count-value">0</strong>
          </div>

          <div class="resource-actions">
            <button id="undo-zone-btn" class="secondary-btn" type="button">Undo Last Zone</button>
            <button id="clear-zones-btn" class="secondary-btn" type="button">Clear Zones</button>
          </div>
        </div>

        <div id="visual-effects-controls-group" class="mode-controls is-hidden">
          <label class="control-row" for="shoreline-relief-toggle">
            <span>Shoreline Relief Colors</span>
            <strong id="shoreline-relief-value">On</strong>
          </label>
          <label class="toggle-row" for="shoreline-relief-toggle">
            <input id="shoreline-relief-toggle" type="checkbox" checked />
            <span>Enable coastal tinting</span>
          </label>

          <label class="control-row" for="river-relief-toggle">
            <span>River Relief Colors</span>
            <strong id="river-relief-value">On</strong>
          </label>
          <label class="toggle-row" for="river-relief-toggle">
            <input id="river-relief-toggle" type="checkbox" checked />
            <span>Tint rivers and riverbanks</span>
          </label>

          <label class="control-row" for="shadow-effect-toggle">
            <span>Shadow Effect</span>
            <strong id="shadow-effect-value">Off</strong>
          </label>
          <label class="toggle-row" for="shadow-effect-toggle">
            <input id="shadow-effect-toggle" type="checkbox" />
            <span>Enable directional shading</span>
          </label>

          <label id="shadow-strength-row" class="control-row shadow-strength-row" for="shadow-strength-slider">
            <span>Shadow Amount</span>
            <strong id="shadow-strength-value">22%</strong>
          </label>
          <input
            id="shadow-strength-slider"
            class="shadow-strength-slider effect-controlled-slider"
            type="range"
            min="0"
            max="400"
            step="1"
            value="22"
          />

          <label id="shadow-length-row" class="control-row shadow-length-row" for="shadow-length-slider">
            <span>Shadow Length</span>
            <strong id="shadow-length-value">120 px</strong>
          </label>
          <input
            id="shadow-length-slider"
            class="shadow-length-slider effect-controlled-slider"
            type="range"
            min="20"
            max="260"
            step="1"
            value="120"
          />

          <label id="peak-lightening-row" class="control-row peak-lightening-row" for="peak-lightening-slider">
            <span>Peak Lightening</span>
            <strong id="peak-lightening-value">35%</strong>
          </label>
          <input
            id="peak-lightening-slider"
            class="peak-lightening-slider effect-controlled-slider"
            type="range"
            min="0"
            max="100"
            step="1"
            value="35"
          />

          <label id="prominence-threshold-row" class="control-row prominence-threshold-row" for="prominence-threshold-slider">
            <span>Prominence Threshold</span>
            <strong id="prominence-threshold-value">8%</strong>
          </label>
          <input
            id="prominence-threshold-slider"
            class="prominence-threshold-slider effect-controlled-slider"
            type="range"
            min="1"
            max="35"
            step="1"
            value="8"
          />
        </div>

        <footer class="control-footer">
          <div id="seed-value">Seed 0</div>
          <div id="stats-value">Generating...</div>
        </footer>
      </div>
    </section>

    <section id="export-panel" class="export-panel" aria-label="Map export panel">
      <header class="export-header">
        <h2>Export</h2>
        <p>Save map + resource metadata</p>
      </header>
      <div class="export-body">
        <label class="export-row" for="export-map-id-input">
          <span>Map ID</span>
        </label>
        <input
          id="export-map-id-input"
          class="export-input"
          type="text"
          value=""
          placeholder="terrain-lab-map"
          spellcheck="false"
        />

        <label class="export-row" for="export-display-name-input">
          <span>Display Name</span>
        </label>
        <input
          id="export-display-name-input"
          class="export-input"
          type="text"
          value=""
          placeholder="Terrain Lab Map"
          spellcheck="false"
        />

        <div class="export-actions">
          <button id="export-bundle-btn" class="secondary-btn export-btn" type="button">
            Export
          </button>
        </div>
        <div id="export-status-value" class="export-status" role="status" aria-live="polite">
          Ready
        </div>
      </div>
    </section>

    <nav id="mode-toggle" class="mode-toggle" aria-label="Editor mode">
      <button class="mode-btn is-active" data-mode="terrain" type="button">Terrain</button>
      <button class="mode-btn" data-mode="resources" type="button">Resources</button>
      <button class="mode-btn" data-mode="visual-effects" type="button">Visual effects</button>
    </nav>

    <script type="module" src="./app.js"></script>
  </body>
</html>
